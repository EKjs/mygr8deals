(this.webpackJsonpibuyit=this.webpackJsonpibuyit||[]).push([[0],{148:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),r=c(32),s=c.n(r),o=(c(118),c(16)),i=c(160),l=c(176),j=c(109),u=c(7),d=c.n(u),b=c(10),h=c(3),O=c(9),x=c.n(O),p=c(103),m=c(0),f=Object(a.createContext)(),g=function(e){var t=e.children,c=Object(o.g)(),n=localStorage.getItem("token"),r=Object(a.useState)(!1),s=Object(h.a)(r,2),i=s[0],l=s[1],j=Object(a.useState)(null),u=Object(h.a)(j,2),O=u[0],g=u[1],v=Object(a.useState)(!1),y=Object(h.a)(v,2),k=y[0],S=y[1],I=Object(a.useState)([]),C=Object(h.a)(I,2),w=C[0],N=C[1],T=Object(a.useState)([]),A=Object(h.a)(T,2),E=A[0],B=A[1],z=Object(a.useState)(!0),F=Object(h.a)(z,2),D=F[0],P=F[1],L=Object(a.useState)({}),H=Object(h.a)(L,2),q=H[0],M=H[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,x.a.get("".concat("http://localhost:5000/","categories"));case 4:return t=e.sent,c=t.data,N(c),e.next=9,x.a.get("".concat("http://localhost:5000/","subcategories"));case 9:a=e.sent,n=a.data,B(n),l(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),3e3),l(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),3e3),l(!1));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[D]),Object(a.useEffect)((function(){if(n){var e=Object(p.a)(n);console.log(e,Date.now()),console.log(new Date(1e3*e.exp).toLocaleString()),Date.now()<1e3*e.exp?(console.log("token not expired"),S(!0)):(console.log("token expired"),localStorage.removeItem("token"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("userType"),S(!1),c.push("/signin"))}}),[n,c]);var R=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,a,n,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.password===t.passwordConfirm){e.next=4;break}return g("Passwords do not match"),setTimeout((function(){return g(null)}),3e3),e.abrupt("return");case 4:return e.prev=4,l(!0),e.next=8,x.a.post("".concat("http://localhost:5000/","users/"),t);case 8:c=e.sent,a=c.data,n=a.token,r=a.userName,s=a.userId,o=a.userType,localStorage.setItem("token",n),localStorage.setItem("userName",r),localStorage.setItem("userId",s),localStorage.setItem("userType",o),S(!0),l(!1),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),3e3),l(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),3e3),l(!1));case 25:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,a,n,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,x.a.post("".concat("http://localhost:5000/","users/signin"),t);case 4:c=e.sent,a=c.data,n=a.token,r=a.userName,s=a.userId,o=a.userType,localStorage.setItem("token",n),localStorage.setItem("userName",r),localStorage.setItem("userId",s),localStorage.setItem("userType",o),S(!0),l(!1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),5e3),l(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),5e3),l(!1));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(f.Provider,{value:{searchParams:q,setSearchParams:M,categoriesList:w,subCategoriesList:E,loading:i,isAuthenticated:k,error:O,signUp:R,signIn:U,signOut:function(){localStorage.removeItem("token"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),S(!1)},setLoading:l,setError:g,updateMenuItems:D,setUpdateMenuItems:P},children:t})},v=c(2),y=c(5),k=function(e){var t=e.component,c=Object(y.a)(e,["component"]),n=Object(o.h)().pathname;return Object(a.useContext)(f).isAuthenticated?Object(m.jsx)(o.b,Object(v.a)(Object(v.a)({},c),{},{render:function(){return Object(m.jsx)(t,{})}})):Object(m.jsx)(o.a,{to:{pathname:"/",state:{next:n}}})},S=c(192),I=c(193),C=c(189),w=c(161),N=c(162),T=c(163),A=c(164),E=c(165),B=c(166),z=c(167),F=c(168),D=c(169),P=c(11),L=c(190),H=c(154),q=c(105),M=c(107),R=c(155),U=c(156),Y=c(111),Z=c(112),G=function(e){var t=e.setCoords,c=e.setCityId,n=e.cityPlaceholder,r=Object(a.useState)(""),s=Object(h.a)(r,2),o=s[0],i=s[1],l=Object(a.useState)([]),j=Object(h.a)(l,2),u=j[0],O=j[1],p=Object(a.useState)(!1),f=Object(h.a)(p,2),g=f[0],v=f[1],y=Object(a.useRef)(null),k=Object(a.useRef)(null),S=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={searchString:t},e.next=3,x.a.post("".concat("http://localhost:5000/","search/plzorcity/"),c);case 3:a=e.sent,n=a.data,O(n),n.length>0?v(!0):v(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n&&i(n)}),[n]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(q.a,{type:"text",placeholder:"City or PLZ","aria-label":"SearchCityPLZ",value:o,onChange:function(e){var t=e.target.value;i(t),t.length>2?(k.current&&clearTimeout(k.current),k.current=setTimeout((function(){S(t)}),1e3)):k.current&&clearTimeout(k.current)},onBlur:function(){return v(!1)},onFocus:function(){return o.length>3&&u.length>0&&v(!0)},ref:y}),Object(m.jsx)(Y.a,{target:y.current,show:g,placement:"bottom",children:Object(m.jsx)(Z.a,{className:"overflow-auto",style:{maxHeight:"50%"},id:"popover-basic",children:Object(m.jsx)(Z.a.Body,{children:u.map((function(e,a){return Object(m.jsx)(C.a.Item,{onClick:function(){return i((a=e).name),c(a.id),void t(a.coords);var a},children:e.name},"optK".concat(a))}))})})})]})},V=function(){var e=Object(a.useContext)(f).setSearchParams,t=Object(o.g)(),c=Object(a.useState)(),n=Object(h.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(),l=Object(h.a)(i,2),j=l[0],u=l[1],d=Object(a.useState)(""),b=Object(h.a)(d,2),O=b[0],x=b[1],p=Object(a.useState)(""),g=Object(h.a)(p,2),v=g[0],y=g[1];return Object(m.jsx)(S.a.Text,{className:"me-auto",children:Object(m.jsxs)(L.a,{className:"d-flex flex-column flex-md-row",children:[Object(m.jsxs)(H.a,{className:"col",children:[Object(m.jsx)(H.a.Text,{style:{backgroundColor:"#f7f7f9"},children:Object(m.jsx)(R.a,{})}),Object(m.jsx)(q.a,{type:"search",placeholder:"Search",className:"mr-2","aria-label":"Search",onChange:function(e){return x(e.target.value)}})]}),Object(m.jsxs)(H.a,{className:"col",children:[Object(m.jsx)(H.a.Text,{style:{backgroundColor:"#f7f7f9"},children:Object(m.jsx)(U.a,{})}),Object(m.jsx)(G,{setCoords:u,setCityId:s})]}),Object(m.jsxs)(H.a,{className:"col",children:[Object(m.jsx)(H.a.Text,{style:{backgroundColor:"#f7f7f9"},children:"+"}),Object(m.jsx)(q.a,{type:"text",as:"input",htmlSize:1,placeholder:"0 km",className:"mr-2","aria-label":"radius",onChange:function(e){var t=new RegExp(/^[0-9]*$/);e.target.value.match(t)&&(console.log(e.target.value),parseInt(e.target.value,10)>100?y(100):y(e.target.value))},value:v,list:"distance-variants"}),Object(m.jsxs)("datalist",{id:"distance-variants",children:[Object(m.jsx)("option",{value:"5"}),Object(m.jsx)("option",{value:"10"}),Object(m.jsx)("option",{value:"15"}),Object(m.jsx)("option",{value:"25"}),Object(m.jsx)("option",{value:"50"})]}),Object(m.jsx)(M.a,{onClick:function(){e({cityId:r,cityCoords:j,distance:v,searchText:O});t.push({pathname:"/search",state:{fromDashboard:!0}})},variant:"secondary",style:{backgroundColor:"#f7f7f9"},children:"Search"})]})]})})},J=c(194),K=c(159),Q=c(157),W=c(158),$=function(e){var t=e.setShow,c=Object(a.useContext)(f),n=c.categoriesList,r=c.subCategoriesList,s=c.loading,o=c.error;return s?Object(m.jsx)(Q.a,{animation:"border",variant:"secondary"}):o?Object(m.jsx)(W.a,{variant:"danger",children:o}):Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(C.a.Item,{as:P.b,to:"/",onClick:function(){return t(!1)},children:"View all ads"})}),n.map((function(e,c){return Object(m.jsxs)("li",{children:[Object(m.jsx)(C.a.Item,{as:P.b,to:"/bycategory/".concat(e.id),onClick:function(){return t(!1)},children:e.description}),Object(m.jsx)("ul",{children:r.filter((function(t){return t.parentId===e.id})).map((function(e,c){return Object(m.jsxs)("li",{children:[" ",Object(m.jsx)(C.a.Item,{as:P.b,to:"/bysubcategory/".concat(e.id),onClick:function(){return t(!1)},children:e.description})," "]},"liksc".concat(c))}))})]},"likc".concat(c))}))]})},X=function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),c=t[0],n=t[1];return Object(m.jsxs)(S.a.Text,{className:"me-auto",children:[Object(m.jsxs)(M.a,{variant:"secondary",onClick:function(){return n(!0)},children:[Object(m.jsx)(K.a,{size:24})," All categories"]}),Object(m.jsxs)(J.a,{show:c,onHide:function(){return n(!1)},children:[Object(m.jsx)(J.a.Header,{closeButton:!0,children:Object(m.jsx)(J.a.Title,{children:"What would you like to buy?"})}),Object(m.jsx)(J.a.Body,{children:Object(m.jsx)($,{setShow:n})})]})]})},_=function(){var e=Object(a.useContext)(f),t=e.isAuthenticated,c=e.signOut,n=localStorage.getItem("userType");return Object(m.jsx)(S.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(m.jsxs)(i.a,{fluid:!0,children:[Object(m.jsx)(S.a.Brand,{as:P.c,to:"/",children:"I buy it!"}),Object(m.jsx)(S.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(m.jsxs)(S.a.Collapse,{id:"responsive-navbar-nav",children:[Object(m.jsx)(X,{}),Object(m.jsx)(V,{}),Object(m.jsx)(I.a,{children:t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(S.a.Text,{children:"Logged in as: "}),Object(m.jsxs)(C.a,{align:"end",children:[Object(m.jsx)(C.a.Toggle,{as:I.a.Link,children:localStorage.getItem("userName")}),Object(m.jsxs)(C.a.Menu,{children:[Object(m.jsxs)(C.a.Item,{as:P.b,to:"/newad",children:[Object(m.jsx)(w.a,{size:24,style:{marginRight:"1rem"}})," Sell!"]}),Object(m.jsxs)(C.a.Item,{as:P.b,to:"/myads",children:[Object(m.jsx)(N.a,{size:24,style:{marginRight:"1rem"}})," My ads"]}),Object(m.jsxs)(C.a.Item,{as:P.b,to:"/myprofile",children:[Object(m.jsx)(T.a,{size:24,style:{marginRight:"1rem"}}),"My profile"]}),Object(m.jsxs)(C.a.Item,{as:P.b,to:"/mystore",children:[Object(m.jsx)(A.a,{size:24,style:{marginRight:"1rem"}}),"My Store"]}),Object(m.jsxs)(C.a.Item,{as:P.b,to:"/messages",children:[Object(m.jsx)(E.a,{size:24,style:{marginRight:"1rem"}}),"Messages"]}),Object(m.jsxs)(C.a.Item,{as:P.b,to:"/myfavads",children:[Object(m.jsx)(B.a,{size:24,style:{marginRight:"1rem"}}),"Fav ads"]}),Object(m.jsxs)(C.a.Item,{as:P.b,to:"/myfavusers",children:[Object(m.jsx)(B.a,{size:24,style:{marginRight:"1rem"}}),"Fav users"]}),Object(m.jsx)(C.a.Divider,{}),Object(m.jsxs)(C.a.Item,{onClick:c,children:[Object(m.jsx)(z.a,{size:24})," Log out"]})]})]})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(I.a.Link,{as:P.c,to:"/signin",children:[Object(m.jsx)(F.a,{size:24})," Sign in"]}),Object(m.jsxs)(I.a.Link,{as:P.c,to:"/signup",children:[Object(m.jsx)(D.a,{size:24})," Sign up"]})]})}),"999"===n&&t&&Object(m.jsx)(I.a,{children:Object(m.jsxs)(C.a,{children:[Object(m.jsx)(C.a.Toggle,{variant:"danger",id:"dropdown-basic",children:"Admin"}),Object(m.jsx)(C.a.Menu,{children:Object(m.jsx)(C.a.Item,{as:P.b,to:"/admin/categoryeditor",children:"Edit categories"})})]})})]})]})})},ee=c(197),te=c(174),ce=c(175),ae=c(177),ne=c(170),re=c(171),se=c(172),oe=c(173),ie=function(e){var t=e.targetId,c=e.description,n=e.path,r=Object(a.useContext)(f).isAuthenticated,s=Object(a.useState)(!1),o=Object(h.a)(s,2),i=o[0],l=o[1],j=function(){var e=Object(b.a)(d.a.mark((function e(a,r){var s,o,i,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="".concat("http://localhost:5000/","favads/"),o={favAdId:t,description:c},"user"===n&&(s="".concat("http://localhost:5000/","favusers/"),o={favUserId:t,description:c}),e.prev=3,e.next=6,x.a.post(s,o,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 6:i=e.sent,j=i.data,console.log(j),l(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.response?console.log(e.t0.response.data.error):console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,c){return e.apply(this,arguments)}}();return r?i?Object(m.jsx)(oe.a,{size:30,color:"red"}):Object(m.jsx)(se.a,{size:30,color:"red",style:{cursor:"pointer"},onClick:function(){return j()}}):Object(m.jsx)(ne.a,{overlay:Object(m.jsx)(re.a,{id:"tooltip-disabled",children:"Sign in to add to favs"}),children:Object(m.jsx)("span",{className:"d-inline-block",children:Object(m.jsx)(se.a,{style:{pointerEvents:"none"}})})})},le=function(e){var t=e.photo,c=e.title,n=(e.address,e.price),r=e.created,s=e.catId,o=e.adId,u=e.views,h=e.cityName,O=e.cityId,p=(e.category,e.subCategory),g=e.subCategoryId,v=Object(a.useContext)(f),y=v.setError,k=v.setLoading,S=localStorage.getItem("userType"),I=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,k(!0),e.next=5,x.a.delete("".concat("http://localhost:5000/","ads/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:c=e.sent,a=c.data,console.log(a),k(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response?(y(e.t0.response.data.error),setTimeout((function(){return y(null)}),5e3),k(!1)):(y(e.t0.message),setTimeout((function(){return y(null)}),5e3),k(!1));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(j.a,{children:Object(m.jsxs)(ee.a,{style:{width:"18rem",minHeight:"36rem"},border:13===s?"success":"secondary",children:["999"===S&&Object(m.jsxs)(ee.a.Header,{children:[Object(m.jsx)(te.a,{}),Object(m.jsx)(ce.a,{onClick:function(){return I(o)}})]}),Object(m.jsx)(P.b,{to:"/view/".concat(o),children:Object(m.jsx)(ee.a.Img,{className:"p-3",style:{objectFit:"cover",height:"20rem"},variant:"top",src:t&&t.length>0?"".concat("http://localhost:5000/","images/").concat(t[0]):"/images/noimg.png"})}),Object(m.jsxs)(ee.a.Body,{children:[Object(m.jsxs)(ee.a.Title,{children:[n," \u20ac"]}),Object(m.jsx)(ee.a.Text,{children:Object(m.jsxs)(P.b,{to:"/view/".concat(o),style:{textDecoration:"none"},children:[c.substring(0,100),c.length>100&&"..."]})})]}),Object(m.jsx)(i.a,{children:Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(ie,{targetId:o,description:c})})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(P.b,{className:"fs-6 text-muted",to:"/bysubcategory/".concat(g),style:{textDecoration:"none"},children:[p," "]}),Object(m.jsxs)(P.b,{className:"fs-6 text-muted",to:"/bycity/".concat(O),style:{textDecoration:"none"},children:[" in ",h]})]})}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{xs:9,children:Object(m.jsx)("p",{className:"fs-6",children:new Date(r).toLocaleString()})}),Object(m.jsx)(j.a,{xs:3,children:Object(m.jsxs)("p",{className:"fs-6",children:[Object(m.jsx)(ae.a,{})," ",u]})})]})]})})})]})})},je=function(){return Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)(Q.a,{animation:"border",role:"status",children:Object(m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},ue=c(21),de=c(198),be=function(e){var t=e.totalPages,c=e.currentPage,a=e.cbPageClick,n=e.pageNeighbours,r="LEFT",s="RIGHT",o=function(e,t){for(var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=e,n=[];a<=t;)n.push(a),a+=c;return n},i=function(){var e=2*(n="number"===typeof n?Math.max(0,Math.min(n,2)):0)+3;if(t>e+2){var a=Math.max(2,c-n),i=Math.min(t-1,c+n),l=o(a,i),j=a>2,u=t-i>1,d=e-(l.length+1);switch(!0){case j&&!u:var b=o(a-d,a-1);l=[r].concat(Object(ue.a)(b),Object(ue.a)(l));break;case!j&&u:var h=o(i+1,i+d);l=[].concat(Object(ue.a)(l),Object(ue.a)(h),[s]);break;case j&&u:default:l=[r].concat(Object(ue.a)(l),[s])}return[1].concat(Object(ue.a)(l),[t])}return o(1,t)}();return 1===t?null:Object(m.jsx)(de.a,{children:i.map((function(e,t){return e===r?Object(m.jsx)(de.a.Prev,{onClick:function(){return a(c-1)}}):e===s?Object(m.jsx)(de.a.Next,{onClick:function(){return a(c+1)}}):Object(m.jsx)(de.a.Item,{active:c===e,onClick:function(){return a(e)},children:e})}))})},he=function(){var e=Object(o.i)(),t=e.subCatId,c=e.catId,n=e.cityId,r=e.adsByUserId,s=e.adsByStoreId,i=Object(a.useState)(),u=Object(h.a)(i,2),O=u[0],p=u[1],f=Object(a.useState)(null),g=Object(h.a)(f,2),v=g[0],y=g[1],k=Object(a.useState)(!0),S=Object(h.a)(k,2),I=S[0],C=S[1],w=Object(a.useState)(1),N=Object(h.a)(w,2),T=N[0],A=N[1],E=Object(a.useState)(),B=Object(h.a)(E,2),z=B[0],F=B[1];return console.log(t,c,n,r),Object(a.useEffect)((function(){var e="ads/";!t&&c?e+="bycategory/".concat(c):t&&!c?e+="bysubcategory/".concat(t):n?e+="bycity/".concat(n):r?e+="byuser/".concat(r):s&&(e+="bystore/".concat(s)),function(){var t=Object(b.a)(d.a.mark((function t(){var c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,C(!0),console.log("http://localhost:5000/"),t.next=5,x.a.get("".concat("http://localhost:5000/").concat(e,"?skip=").concat(8*(T-1),"&limit=").concat(8));case 5:c=t.sent,a=c.data,p(a),a.length>0?F(Math.ceil(parseInt(a[0].totalRows,10)/8)):(F(0),A(1)),console.log(a),C(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),t.t0.response?(y(t.t0.response.data.error),C(!1)):(y(t.t0.message),C(!1));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}()()}),[t,c,n,s,r,T]),I?Object(m.jsx)(je,{}):v?Object(m.jsx)(W.a,{variant:"danger",children:v}):Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{className:"g-4",children:O.map((function(e,t){return Object(m.jsx)(le,{title:e.title,photo:e.photos,address:e.address,price:e.price,created:e.created,catId:e.catId,category:e.category,subCategoryId:e.subCategoryId,subCategory:e.subCategory,cityName:e.cityName,cityId:e.cityId,adId:e.adId,views:e.views},"adk".concat(t))}))}),Object(m.jsx)(l.a,{className:"justify-content-center mt-4",children:Object(m.jsx)(j.a,{sm:"auto",children:Object(m.jsx)(be,{totalPages:z,currentPage:T,cbPageClick:A})})})]})})},Oe=c(178),xe=c(179),pe=c(180),me=function(){return Object(m.jsx)("div",{className:"container border-top mt-5",children:Object(m.jsxs)("footer",{className:"pt-5 d-none d-sm-block",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-2",children:[Object(m.jsx)("h5",{children:"Section"}),Object(m.jsxs)("ul",{className:"nav flex-column",children:[Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"Home"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"Features"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"Pricing"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"FAQs"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"About"})})]})]}),Object(m.jsxs)("div",{className:"col-2",children:[Object(m.jsx)("h5",{children:"Section"}),Object(m.jsxs)("ul",{className:"nav flex-column",children:[Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"Home"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"Features"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"Pricing"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"FAQs"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"About"})})]})]}),Object(m.jsxs)("div",{className:"col-2",children:[Object(m.jsx)("h5",{children:"Section"}),Object(m.jsxs)("ul",{className:"nav flex-column",children:[Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"Home"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"Features"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"Pricing"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"FAQs"})}),Object(m.jsx)("li",{className:"nav-item mb-2",children:Object(m.jsx)("a",{href:"/",className:"nav-link p-0 text-muted",children:"About"})})]})]}),Object(m.jsx)("div",{className:"col-4 offset-1",children:Object(m.jsxs)("form",{children:[Object(m.jsx)("h5",{children:"Subscribe to our newsletter"}),Object(m.jsx)("p",{children:"Monthly digest of whats new and exciting from us."}),Object(m.jsxs)("div",{className:"d-flex w-100 gap-2",children:[Object(m.jsx)("label",{htmlFor:"newsletter1",className:"visually-hidden",children:"Email address"}),Object(m.jsx)("input",{id:"newsletter1",type:"text",className:"form-control",placeholder:"Email address"}),Object(m.jsx)("button",{className:"btn btn-primary",type:"button",children:"Subscribe"})]})]})})]}),Object(m.jsxs)("div",{className:"d-flex justify-content-between pt-4 mt-4 border-top",children:[Object(m.jsx)("p",{children:"\xa9 2021 Company, Inc. All rights reserved."}),Object(m.jsxs)("ul",{className:"list-unstyled d-flex",children:[Object(m.jsx)("li",{className:"ms-3",children:Object(m.jsx)("a",{className:"link-dark",href:"/",children:Object(m.jsx)("svg",{className:"bi",width:"24",height:"24",children:Object(m.jsx)(Oe.a,{})})})}),Object(m.jsx)("li",{className:"ms-3",children:Object(m.jsx)("a",{className:"link-dark",href:"/",children:Object(m.jsx)("svg",{className:"bi",width:"24",height:"24",children:Object(m.jsx)(xe.a,{})})})}),Object(m.jsx)("li",{className:"ms-3",children:Object(m.jsx)("a",{className:"link-dark",href:"/",children:Object(m.jsx)("svg",{className:"bi",width:"24",height:"24",children:Object(m.jsx)(pe.a,{})})})})]})]})]})})},fe=c(110),ge=function(){var e=Object(o.h)(),t=Object(a.useState)(""),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(""),i=Object(h.a)(s,2),u=i[0],O=i[1],x=Object(a.useContext)(f),p=x.loading,g=x.error,v=x.signIn,y=x.isAuthenticated,k=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v({email:n,password:u});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return y?Object(m.jsx)(o.a,{to:{pathname:e.state?e.state.next:"/",from:e.pathname}}):p?Object(m.jsx)(Q.a,{animation:"border",variant:"secondary"}):Object(m.jsx)(l.a,{className:"justify-content-center mt-5",children:Object(m.jsx)(j.a,{md:4,children:Object(m.jsxs)(L.a,{onSubmit:k,children:[g&&Object(m.jsx)(W.a,{variant:"danger",children:g}),Object(m.jsx)(L.a.Text,{className:"text-muted",children:"Please enter your email and password"}),Object(m.jsx)(fe.a,{controlId:"floatingInput",label:"Email address",children:Object(m.jsx)(L.a.Control,{type:"email",placeholder:"name@example.com",onChange:function(e){return r(e.target.value)},required:!0})}),Object(m.jsx)(fe.a,{controlId:"floatingPassword",label:"Password",className:"mb-3",children:Object(m.jsx)(L.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return O(e.target.value)},required:!0})}),Object(m.jsxs)(L.a.Group,{className:"mb-3",controlId:"formBasicCheckbox",children:[Object(m.jsx)(L.a.Check,{type:"checkbox",label:"Remember me"})," "]}),Object(m.jsx)(M.a,{variant:"primary",type:"submit",className:"w-100",children:"Sign in"})]})})})},ve=function(){var e=Object(o.h)(),t=Object(a.useState)(""),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(""),i=Object(h.a)(s,2),u=i[0],O=i[1],x=Object(a.useState)(""),p=Object(h.a)(x,2),g=p[0],v=p[1],y=Object(a.useState)(""),k=Object(h.a)(y,2),S=k[0],I=k[1],C=Object(a.useState)(""),w=Object(h.a)(C,2),N=w[0],T=w[1],A=Object(a.useContext)(f),E=A.loading,B=A.error,z=A.signUp,F=A.isAuthenticated,D=Object(a.useState)(!1),P=Object(h.a)(D,2),H=P[0],q=P[1],R=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),q(!0),t.preventDefault(),e.next=6,z({userName:n,email:g,password:S,passwordConfirm:N,phone:u});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return F?Object(m.jsx)(o.a,{to:{pathname:e.state?e.state.next:"/",from:e.pathname}}):E?Object(m.jsx)(Q.a,{animation:"border",variant:"secondary"}):Object(m.jsx)(l.a,{className:"justify-content-center mt-5",children:Object(m.jsx)(j.a,{md:4,children:Object(m.jsxs)(L.a,{noValidate:!0,validated:H,onSubmit:R,children:[B&&Object(m.jsx)(W.a,{variant:"danger",children:B}),Object(m.jsx)(L.a.Text,{className:"text-muted",children:"Please enter your email and password"}),Object(m.jsx)(fe.a,{controlId:"floatingInputUserName",label:"Enter your name",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"John Doe",onChange:function(e){return r(e.target.value)},value:n,required:!0})}),Object(m.jsx)(fe.a,{controlId:"floatingInputPhoneNum",label:"Enter your phone number (optional)",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"tel",placeholder:"+49 123 456 789 101",onChange:function(e){return O(e.target.value)},value:u})}),Object(m.jsx)(fe.a,{controlId:"floatingInputEmail",label:"Email address",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"email",placeholder:"name@example.com",onChange:function(e){return v(e.target.value)},value:g,required:!0})}),Object(m.jsx)(fe.a,{controlId:"floatingInputPassword",label:"Password",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return I(e.target.value)},value:S,required:!0})}),Object(m.jsx)(fe.a,{controlId:"floatingInputConfirmPassword",label:"Confirm password",className:"mb-3",children:Object(m.jsx)(L.a.Control,{type:"password",placeholder:"Confirm password",onChange:function(e){return T(e.target.value)},value:N,required:!0})}),Object(m.jsx)(L.a.Check,{required:!0,label:"Agree to terms and conditions",feedback:"You must agree before submitting."}),Object(m.jsx)(M.a,{variant:"primary",type:"submit",className:"w-100",children:"Sign in"})]})})})},ye=c(195),ke=c(34),Se=function(e){var t=e.setCoords,c=e.coords;return Object(a.useEffect)((function(){c||navigator.geolocation.getCurrentPosition((function(e){return t([e.coords.latitude,e.coords.longitude])}),(function(e){return console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}),[t,c]),Object(m.jsx)(ke.a,{height:300,center:c,defaultZoom:11,onClick:function(e){var c=e.latLng;t(c)},children:c&&Object(m.jsx)(ke.b,{width:50,anchor:c})})},Ie=c(181),Ce=function(){var e=Object(o.i)().adId,t=Object(o.g)(),c=Object(a.useContext)(f),n=c.categoriesList,r=c.subCategoriesList,s={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"multipart/form-data"}},i=Object(a.useState)(!0),u=Object(h.a)(i,2),O=u[0],p=u[1],g=Object(a.useState)(null),v=Object(h.a)(g,2),y=v[0],k=v[1],S=Object(a.useState)(""),I=Object(h.a)(S,2),C=I[0],w=I[1],N=Object(a.useState)(0),T=Object(h.a)(N,2),A=T[0],E=T[1],B=Object(a.useState)(""),z=Object(h.a)(B,2),F=z[0],D=z[1],P=Object(a.useState)(),H=Object(h.a)(P,2),q=H[0],R=H[1],U=Object(a.useState)([]),Y=Object(h.a)(U,2),Z=Y[0],V=Y[1],J=Object(a.useState)(),K=Object(h.a)(J,2),Q=K[0],$=K[1],X=Object(a.useState)(),_=Object(h.a)(X,2),ee=_[0],te=_[1],ce=Object(a.useState)(),ae=Object(h.a)(ce,2),ne=ae[0],re=ae[1],se=Object(a.useState)([]),oe=Object(h.a)(se,2),ie=oe[0],le=oe[1],de=Object(a.useState)(),be=Object(h.a)(de,2),he=be[0],Oe=be[1],xe=Object(a.useState)(),pe=Object(h.a)(xe,2),me=pe[0],ge=pe[1],ve=Object(a.useState)([]),ke=Object(h.a)(ve,2),Ce=ke[0],we=ke[1],Ne=Object(a.useState)(),Te=Object(h.a)(Ne,2),Ae=Te[0],Ee=Te[1],Be=Object(a.useState)(!1),ze=Object(h.a)(Be,2),Fe=ze[0],De=ze[1],Pe=function(){var c=Object(b.a)(d.a.mark((function c(){var a,n,r;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a=Number.isFinite(parseFloat(A))?parseFloat(A):0,n={title:C,description:Ae,subCategoryId:ne,price:a,cityId:he,address:F,photos:Ce,coords:me,currentState:q,sellAsStore:Fe},console.log(n),c.prev=3,p(!0),!e){c.next=11;break}return c.next=8,x.a.put("".concat("http://localhost:5000/","ads/").concat(e),n,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 8:r=c.sent,c.next=14;break;case 11:return c.next=13,x.a.post("".concat("http://localhost:5000/","ads"),n,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 13:r=c.sent;case 14:console.log(r.data),r.data.id&&t.push("/view/".concat(r.data.id)),p(!1),c.next=22;break;case 19:c.prev=19,c.t0=c.catch(3),c.t0.response?(k(c.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(c.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 22:case"end":return c.stop()}}),c,null,[[3,19]])})));return function(){return c.apply(this,arguments)}}(),Le=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return we((function(e){return e.filter((function(e){return e!==t}))})),c="".concat("http://localhost:5000/","image-upload/"),e.prev=2,e.next=5,x.a.delete("".concat(c).concat(t),s);case 5:a=e.sent,n=a.data,console.log(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0.response?(k(e.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(e.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(ee){var t=r.filter((function(e){return e.parentId===ee}));le(t),t.length>0?e||re(t[0].id):re(null)}else te(n[0].id)}),[ee,r,n,e]),Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,x.a.get("".concat("http://localhost:5000/","adstates"));case 4:t=e.sent,c=t.data,V(c),R(c[0].id),p(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(k(e.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(e.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()(),e)&&function(){var t=Object(b.a)(d.a.mark((function t(){var c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(!0),t.next=4,x.a.get("".concat("http://localhost:5000/","ads/").concat(e));case 4:c=t.sent,a=c.data,w(a.title),E(a.price),D(a.address),R(a.currentState),Ee(a.description),we(a.photos),console.log("photos",a.photos),re(a.subCategoryId),ge(a.coords),te(a.catId),$(a.cityName),Oe(a.cityId),console.log(a),p(!1),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),t.t0.response?(k(t.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(t.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var He=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=new FormData,a=0;a<t.target.files.length;a++)c.append("image",t.target.files[a]);return e.prev=2,p(!0),e.next=6,x.a.post("".concat("http://localhost:5000/","image-upload"),c,s);case 6:n=e.sent,r=n.data,console.log(r),we(Ce?function(e){return[].concat(Object(ue.a)(e),Object(ue.a)(r))}:r),p(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),e.t0.response?(k(e.t0.response.data.error),setTimeout((function(){return k(null)}),5e3),p(!1)):(k(e.t0.message),setTimeout((function(){return k(null)}),5e3),p(!1));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return!ie||O?Object(m.jsx)(je,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.a,{children:[y&&Object(m.jsx)(W.a,{children:y}),Object(m.jsx)(j.a,{children:Object(m.jsx)(fe.a,{controlId:"floatingSelectCat",label:"Choose category",children:Object(m.jsx)(L.a.Select,{"aria-label":"Categories list",value:ee,onChange:function(e){return te(parseInt(e.target.value,10))},children:n.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"catk".concat(t))}))})})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(fe.a,{controlId:"floatingSelectSubCat",label:"Choose sub-category",children:Object(m.jsx)(L.a.Select,{"aria-label":"Sub categories list",value:ne,onChange:function(e){return re(parseInt(e.target.value,10))},children:ie.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"subCatk".concat(t))}))})})})]}),Object(m.jsxs)(l.a,{className:"my-2",children:[Object(m.jsxs)(j.a,{sm:7,children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(fe.a,{controlId:"floatingInputTitle",label:"Enter title (required)",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"Some title",onChange:function(e){return w(e.target.value)},value:C,required:!0})})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(fe.a,{controlId:"floatingTextareaDescription",label:"Enter description",children:Object(m.jsx)(L.a.Control,{as:"textarea",placeholder:"Enter description here",onChange:function(e){return Ee(e.target.value)},value:Ae,style:{height:"200px"}})})})}),Object(m.jsxs)(l.a,{className:"mt-3",children:[Object(m.jsxs)(j.a,{children:[Object(m.jsx)(L.a.Check,{required:!0,label:"Sell as store",feedback:"Sell as store",value:Fe,onChange:function(e){return De(e.target.checked)}})," ",Object(m.jsx)("br",{}),Object(m.jsx)(L.a.Check,{required:!0,label:"Agree to terms and conditions",feedback:"You must agree before submitting."})," ",Object(m.jsx)("br",{}),Object(m.jsx)(M.a,{variant:"primary",onClick:Pe,children:"Submit"})]}),Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(L.a.Group,{controlId:"formFileMultiple",className:"mb-3",children:[Object(m.jsx)(L.a.Control,{type:"file",multiple:!0,onChange:He}),Object(m.jsx)(L.a.Label,{children:"Choose photos to upload"})]}),Ce&&Ce.length>0&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(ye.a,{variant:"dark",children:Ce.map((function(e,t){return Object(m.jsxs)(ye.a.Item,{children:[Object(m.jsx)("img",{className:"d-block w-100",src:"".concat("http://localhost:5000/","images/").concat(e),alt:"what is it?",style:{objectFit:"scale-down",height:"25rem"}}),Object(m.jsx)(ye.a.Caption,{children:Object(m.jsxs)(M.a,{onClick:function(){return Le(e)},variant:"outline-danger",children:[" ",Object(m.jsx)(Ie.a,{size:24})," "]})})]},"photoK".concat(t))}))})})]})]})]}),Object(m.jsxs)(j.a,{sm:5,children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(fe.a,{controlId:"floatingInputPrice",label:"Enter price",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"1 000 000",onChange:function(e){return E(e.target.value)},value:A})})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(fe.a,{controlId:"floatingSelectStatus",label:"Choose status",children:Object(m.jsx)(L.a.Select,{"aria-label":"Ad statuses list",value:q,onChange:function(e){return R(parseInt(e.target.value,10))},children:Z.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"statusk".concat(t))}))})})})}),Object(m.jsx)(l.a,{className:"my-2",children:Object(m.jsx)(j.a,{children:Object(m.jsx)(G,{setCoords:ge,setCityId:Oe,cityPlaceholder:Q})})}),Object(m.jsx)(l.a,{className:"my-2",children:Object(m.jsx)(fe.a,{controlId:"floatingInputAddress",label:"Enter address (optional)",className:"mb-1",children:Object(m.jsx)(L.a.Control,{as:"textarea",placeholder:"Some street 1",onChange:function(e){return D(e.target.value)},value:F})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Se,{setCoords:ge,coords:me})})})]})]})]})},we=function(){var e=Object(a.useContext)(f),t=e.categoriesList,c=e.subCategoriesList,n=e.loading,r=e.error,s=e.setLoading,o=e.setError,i=e.updateMenuItems,u=e.setUpdateMenuItems,O=Object(a.useState)(),p=Object(h.a)(O,2),g=p[0],v=p[1],y=Object(a.useState)(""),k=Object(h.a)(y,2),S=k[0],I=k[1],C=Object(a.useState)([]),w=Object(h.a)(C,2),N=w[0],T=w[1],A=Object(a.useState)(),E=Object(h.a)(A,2),B=E[0],z=E[1],F=Object(a.useState)(""),D=Object(h.a)(F,2),P=D[0],q=D[1],R=function(){var e=Object(b.a)(d.a.mark((function e(c){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s(!0),a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},"put"!==c){e.next=9;break}return e.next=6,x.a.put("".concat("http://localhost:5000/","categories/").concat(g),{category:S},a);case 6:n=e.sent,e.next=39;break;case 9:if("delete"!==c){e.next=17;break}return e.next=12,x.a.delete("".concat("http://localhost:5000/","categories/").concat(g),a);case 12:n=e.sent,v(t[0].id),I(t[0].description),e.next=39;break;case 17:if("new"!==c){e.next=23;break}return e.next=20,x.a.post("".concat("http://localhost:5000/","categories/"),{category:S},a);case 20:n=e.sent,e.next=39;break;case 23:if("newSc"!==c){e.next=29;break}return e.next=26,x.a.post("".concat("http://localhost:5000/","subcategories/"),{parentId:g,subCategory:P},a);case 26:n=e.sent,e.next=39;break;case 29:if("deleteSc"!==c){e.next=35;break}return e.next=32,x.a.delete("".concat("http://localhost:5000/","subcategories/").concat(B),a);case 32:n=e.sent,e.next=39;break;case 35:if("putSc"!==c){e.next=39;break}return e.next=38,x.a.put("".concat("http://localhost:5000/","subcategories/").concat(B),{parentId:g,subCategory:P},a);case 38:n=e.sent;case 39:console.log(n),u(!i),s(!1),e.next=48;break;case 45:e.prev=45,e.t0=e.catch(0),e.t0.response?(o(e.t0.response.data.error),setTimeout((function(){return o(null)}),3e3),s(!1)):(o(e.t0.message),setTimeout((function(){return o(null)}),3e3),s(!1));case 48:case"end":return e.stop()}}),e,null,[[0,45]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(g){var e=t.find((function(e){return e.id===g}));I(e.description);var a=c.filter((function(e){return e.parentId===g}));T(a),a.length>0?(z(a[0].id),q(a[0].description)):(q(""),z(""))}else v(t[0].id),I(t[0].description)}),[t,g,c]),Object(a.useEffect)((function(){if(B){var e=N.find((function(e){return e.id===B}));q(e.description)}}),[B,c,g,N]),n?Object(m.jsx)(je,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.a,{className:"py-4 bg-warning my-4",children:[r&&Object(m.jsx)(j.a,{children:Object(m.jsx)(W.a,{children:r})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(fe.a,{controlId:"floatingSelectCat",label:"Choose category",children:Object(m.jsx)(L.a.Select,{"aria-label":"Categories list",value:g,onChange:function(e){return v(parseInt(e.target.value,10))},children:t.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"catk".concat(t))}))})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(H.a,{children:[Object(m.jsx)(fe.a,{controlId:"floatingInputCategory",label:"Category description",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"category description",value:S,onChange:function(e){return I(e.target.value)},required:!0})}),Object(m.jsx)(M.a,{onClick:function(){return R("new")},variant:"outline-dark",disabled:0===S.length,children:"Add New"}),Object(m.jsx)(M.a,{onClick:function(){return R("put")},variant:"outline-dark",disabled:0===S.length||!g,children:"Rename"}),Object(m.jsx)(M.a,{onClick:function(){return R("delete")},variant:"danger",disabled:0===S.length||!g,children:"Delete"})]})})]}),Object(m.jsxs)(l.a,{className:"py-4 bg-warning my-4",children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(fe.a,{controlId:"floatingSelectCat",label:"Choose category",children:Object(m.jsx)(L.a.Select,{"aria-label":"Categories list",value:B,onChange:function(e){return z(parseInt(e.target.value,10))},children:N.length>0?N.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"sbcatk".concat(t))})):""})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(H.a,{children:[Object(m.jsx)(fe.a,{controlId:"floatingInputSubCategory",label:"Sub category description",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"sub category description",value:P,onChange:function(e){return q(e.target.value)},required:!0})}),Object(m.jsx)(M.a,{onClick:function(){return R("newSc")},variant:"outline-dark",disabled:0===P.length,children:"Add New"}),Object(m.jsx)(M.a,{onClick:function(){return R("putSc")},variant:"outline-dark",disabled:0===P.length||!B,children:"Rename"}),Object(m.jsx)(M.a,{onClick:function(){return R("deleteSc")},variant:"danger",disabled:0===P.length||!B,children:"Delete"})]})})]})]})},Ne=c(182),Te=function(){var e=Object(o.i)().adId,t=Object(a.useState)(!0),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(null),i=Object(h.a)(s,2),u=i[0],O=i[1],p=Object(a.useState)({}),f=Object(h.a)(p,2),g=f[0],v=f[1];return Object(a.useEffect)((function(){(function(){var t=Object(b.a)(d.a.mark((function t(){var c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(!0),t.next=4,x.a.get("".concat("http://localhost:5000/","ads/").concat(e));case 4:c=t.sent,a=c.data,v(a),console.log(a),r(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response?(O(t.t0.response.data.error),setTimeout((function(){return O(null)}),5e3),r(!1)):(O(t.t0.message),setTimeout((function(){return O(null)}),5e3),r(!1));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),n?Object(m.jsx)(je,{}):Object(m.jsxs)(l.a,{children:[u&&Object(m.jsx)(W.a,{children:u}),Object(m.jsxs)(j.a,{children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{className:"m-3 p-3",style:{backgroundColor:"#faf9f9"},children:Object(m.jsx)(ye.a,{variant:"dark",children:g.photos&&g.photos.length>0?g.photos.map((function(e,t){return Object(m.jsx)(ye.a.Item,{children:Object(m.jsx)("img",{style:{objectFit:"scale-down",height:"25rem"},className:"d-block w-100",src:"".concat("http://localhost:5000/","/images/").concat(e),alt:"Something interesting"})},"photoK".concat(t))})):Object(m.jsx)(ye.a.Item,{children:Object(m.jsx)("img",{style:{objectFit:"scale-down",height:"25rem"},className:"d-block w-100",src:"/images/noimg.png",alt:"Nothing here"})})})})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{className:"m-3 p-3",style:{backgroundColor:"#faf9f9"},children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsx)("h4",{children:g.title}),g.price&&g.price>0&&Object(m.jsxs)("h3",{children:[g.price,"\u20ac"]}),Object(m.jsx)("p",{className:"mt-3",children:g.description})]})}),Object(m.jsxs)(l.a,{className:"mt-4",children:[Object(m.jsx)(j.a,{children:Object(m.jsxs)("p",{className:"fs-6 text-muted",children:["Views: ",g.views]})}),Object(m.jsx)(j.a,{children:Object(m.jsx)(ie,{targetId:g.adId,description:g.title})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("p",{className:"fs-6 text-muted text-end",children:["ID: ",g.adId]})})]})]})})]}),Object(m.jsxs)(j.a,{sm:4,children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{className:"m-3 p-3",style:{backgroundColor:"#faf9f9"},children:[g.storeId&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(P.b,{to:"/viewstore/".concat(g.storeId),style:{textDecoration:"none"},children:Object(m.jsx)("h4",{classname:"secondary",children:g.storeName})}),Object(m.jsx)("br",{})]}),Object(m.jsx)(P.b,{className:"fs-6 text-muted",to:"/byuser/".concat(g.ownerId),style:{textDecoration:"none"},children:Object(m.jsx)("h4",{children:g.userName})})," ",Object(m.jsx)("br",{}),Object(m.jsxs)("h5",{children:[Object(m.jsx)(Ne.a,{size:24})," ",g.userPhone]}),Object(m.jsx)("br",{}),Object(m.jsxs)("p",{className:"fs-6 text-muted",children:["Member since ",new Date(g.created).toLocaleString()]}),Object(m.jsxs)("p",{className:"fs-6 text-muted",children:["Was online ",new Date(g.wasOnline).toLocaleString()]}),Object(m.jsx)(ie,{targetId:g.ownerId,description:g.userName,path:"user"})]})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{className:"m-3 p-3",style:{backgroundColor:"#faf9f9"},children:[Object(m.jsx)("h5",{children:g.cityName}),Object(m.jsx)("p",{children:g.address}),Object(m.jsx)(ke.a,{height:300,center:g.coords,defaultZoom:11,children:g.coords&&Object(m.jsx)(ke.b,{width:50,anchor:g.coords})})]})})]})]})},Ae=c(191),Ee=c(183),Be=function(){var e=Object(a.useContext)(f).signOut,t=Object(a.useState)({}),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(!0),o=Object(h.a)(s,2),i=o[0],u=o[1],O=Object(a.useState)(null),p=Object(h.a)(O,2),g=p[0],v=p[1],y=Object(a.useState)(!1),k=Object(h.a)(y,2),S=k[0],I=k[1],C=function(){return I(!1)},w=function(){var t=Object(b.a)(d.a.mark((function t(){var c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(!0),t.next=4,x.a.delete("".concat("http://localhost:5000/","users/").concat(localStorage.getItem("userId")),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:c=t.sent,a=c.data,console.log(a),e(),u(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response?(v(t.t0.response.data.error),setTimeout((function(){return v(null)}),5e3),u(!1)):(v(t.t0.message),setTimeout((function(){return v(null)}),5e3),u(!1));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,x.a.get("".concat("http://localhost:5000/","users/").concat(localStorage.getItem("userId")),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,r(c),console.log(c),u(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(v(e.t0.response.data.error),setTimeout((function(){return v(null)}),5e3),u(!1)):(v(e.t0.message),setTimeout((function(){return v(null)}),5e3),u(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),i?Object(m.jsx)(je,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.a,{className:"justify-content-center",children:[g&&Object(m.jsx)(W.a,{children:g}),Object(m.jsxs)(j.a,{sm:6,children:[Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)("h4",{children:[Object(m.jsx)("small",{className:"text-muted",children:"User name: "}),n.name]}),Object(m.jsxs)("h4",{children:[Object(m.jsx)("small",{className:"text-muted",children:"E-Mail: "}),n.email]}),Object(m.jsxs)("h4",{children:[Object(m.jsx)("small",{className:"text-muted",children:"Phone number: "}),n.phone]}),Object(m.jsxs)("h4",{children:[Object(m.jsx)("small",{className:"text-muted",children:"Registered on: "}),new Date(n.registerDate).toLocaleString()]}),Object(m.jsxs)("h4",{children:[Object(m.jsx)("small",{className:"text-muted",children:"User type: "}),n.userType]})]})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(M.a,{variant:"outline-dark",as:P.b,to:"/editprofile",children:[Object(m.jsx)(Ee.a,{})," Edit profile"," "]}),Object(m.jsxs)(M.a,{variant:"outline-danger",onClick:function(){return I(!0)},children:[Object(m.jsx)(ce.a,{})," Delete profile"]})," "]})})]})]}),Object(m.jsxs)(Ae.a,{show:S,onHide:C,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(Ae.a.Header,{closeButton:!0,children:Object(m.jsx)(Ae.a.Title,{children:"Do you really want to delete your profile?"})}),Object(m.jsx)(Ae.a.Body,{children:"All your ads, your favotites and all your data will be deleted."}),Object(m.jsxs)(Ae.a.Footer,{children:[Object(m.jsx)(M.a,{variant:"success",onClick:C,children:"No, missclicked!"}),Object(m.jsx)(M.a,{variant:"danger",onClick:w,children:"Yes, pls delete!"})]})]})]})},ze=function(){var e=Object(a.useContext)(f).signOut,t=Object(a.useState)(!0),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(null),o=Object(h.a)(s,2),i=o[0],u=o[1],O=Object(a.useState)(""),p=Object(h.a)(O,2),g=p[0],v=p[1],y=Object(a.useState)(""),k=Object(h.a)(y,2),S=k[0],I=k[1],C=Object(a.useState)(""),w=Object(h.a)(C,2),N=w[0],T=w[1],A=Object(a.useState)(""),E=Object(h.a)(A,2),B=E[0],z=E[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,x.a.get("".concat("http://localhost:5000/","users/").concat(localStorage.getItem("userId")),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,v(c.name),I(c.phone),T(c.email),console.log(c),r(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(u(e.t0.response.data.error),setTimeout((function(){return u(null)}),5e3),r(!1)):(u(e.t0.message),setTimeout((function(){return u(null)}),5e3),r(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var F=function(){var t=Object(b.a)(d.a.mark((function t(){var c,a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={userName:g,email:N,phone:S},t.prev=1,r(!0),t.next=5,x.a.put("".concat("http://localhost:5000/","users/").concat(localStorage.getItem("userId")),c,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:a=t.sent,n=a.data,console.log(n),String(n.id)===localStorage.getItem("userId")&&(z("You must re-login for the changes to take effect!"),setTimeout((function(){return e()}),5e3)),r(!1),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),t.t0.response?(u(t.t0.response.data.error),r(!1)):(u(t.t0.message),r(!1));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}();return n?Object(m.jsx)(je,{}):B?Object(m.jsx)(l.a,{className:"justify-content-center",children:Object(m.jsx)(W.a,{children:B})}):Object(m.jsxs)(l.a,{className:"justify-content-center",children:[i&&Object(m.jsx)(W.a,{children:i}),Object(m.jsxs)(j.a,{sm:4,children:[Object(m.jsx)(fe.a,{controlId:"floatingInputUserName",label:"Enter your name (required)",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"Some username",onChange:function(e){return v(e.target.value)},value:g,required:!0})}),Object(m.jsx)(fe.a,{controlId:"floatingInputEmail",label:"Enter your email (required)",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"Some email",onChange:function(e){return T(e.target.value)},value:N,required:!0})}),Object(m.jsx)(fe.a,{controlId:"floatingInputPhoneNumber",label:"Enter your name (required)",className:"mb-2",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"Some phone number",onChange:function(e){return I(e.target.value)},value:S,required:!0})}),Object(m.jsxs)("div",{className:"d-grid gap-2",children:[Object(m.jsx)(M.a,{variant:"primary",size:"sm",onClick:F,children:"Save changes"}),Object(m.jsx)(M.a,{variant:"secondary",size:"sm",as:P.b,to:"/",children:"Cancel"})]})]})]})},Fe=function(){var e={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"multipart/form-data"}},t=Object(o.i)().storeId,c=Object(a.useState)(!1),n=Object(h.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(null),u=Object(h.a)(i,2),O=u[0],p=u[1],f=Object(a.useState)(""),g=Object(h.a)(f,2),v=g[0],y=g[1],k=Object(a.useState)(""),S=Object(h.a)(k,2),I=S[0],C=S[1],w=Object(a.useState)(""),N=Object(h.a)(w,2),T=N[0],A=N[1],E=Object(a.useState)(""),B=Object(h.a)(E,2),z=B[0],F=B[1],D=Object(a.useState)(),H=Object(h.a)(D,2),q=H[0],R=H[1],U=Object(a.useState)(),Y=Object(h.a)(U,2),Z=Y[0],V=Y[1],J=Object(a.useState)(),K=Object(h.a)(J,2),Q=K[0],$=K[1],X=Object(o.g)();Object(a.useEffect)((function(){t&&function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,x.a.get("".concat("http://localhost:5000/","stores/my/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,y(c.title),C(c.address),A(c.description),F(c.photo),R(c.cityId),V(c.coords),$(c.cityName),console.log(c),s(!1),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),e.t0.response?(p(e.t0.response.data.error),setTimeout((function(){return p(null)}),5e3),s(!1)):(p(e.t0.message),setTimeout((function(){return p(null)}),5e3),s(!1));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var _=function(){var t=Object(b.a)(d.a.mark((function t(c){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("image",c.target.files[0]),t.prev=2,s(!0),t.next=6,x.a.post("".concat("http://localhost:5000/","image-upload"),a,e);case 6:n=t.sent,r=n.data,console.log(r),F(r[0]),s(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),t.t0.response?(p(t.t0.response.data.error),setTimeout((function(){return p(null)}),5e3),s(!1)):(p(t.t0.message),setTimeout((function(){return p(null)}),5e3),s(!1));case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}(),ee=function(){var e=Object(b.a)(d.a.mark((function e(){var c,a,n,r,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={title:v,address:I,description:T,coords:Z,cityId:q,photo:z},e.prev=1,s(!0),!t){e.next=11;break}return e.next=6,x.a.put("".concat("http://localhost:5000/","stores/").concat(t),c,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 6:n=e.sent,r=n.data,a=r,e.next=16;break;case 11:return e.next=13,x.a.post("".concat("http://localhost:5000/","stores/"),c,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 13:o=e.sent,i=o.data,a=i;case 16:console.log(a),a.id&&(s(!1),X.push("/mystore")),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),e.t0.response?(p(e.t0.response.data.error),s(!1)):(p(e.t0.message),s(!1));case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(){return e.apply(this,arguments)}}();return r?Object(m.jsx)(je,{}):Object(m.jsx)(l.a,{className:"justify-content-center",children:Object(m.jsxs)(j.a,{md:10,children:[O&&Object(m.jsx)(W.a,{children:O}),Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(j.a,{md:4,children:[Object(m.jsx)(fe.a,{controlId:"floatingInputStoreName",label:"Enter name of your store (required)",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"Some title",onChange:function(e){return y(e.target.value)},value:v,required:!0})}),Object(m.jsx)(fe.a,{controlId:"floatingInputStoreDescription",label:"Enter your store's description (required)",className:"mb-2",children:Object(m.jsx)(L.a.Control,{as:"textarea",placeholder:"Some descriptiion",style:{height:"300px"},onChange:function(e){return A(e.target.value)},value:T,required:!0})})]}),Object(m.jsxs)(j.a,{md:4,children:[Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(fe.a,{controlId:"floatingInputStoreAddress",label:"Enter address of your store (required)",className:"mb-1",children:Object(m.jsx)(L.a.Control,{type:"text",placeholder:"Some address",onChange:function(e){return C(e.target.value)},value:I,required:!0})})})}),Object(m.jsx)(l.a,{className:"my-2",children:Object(m.jsx)(j.a,{children:Object(m.jsx)(G,{cityPlaceholder:Q,setCoords:V,setCityId:R})})}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{children:Object(m.jsx)(Se,{setCoords:V,coords:Z})})})]}),Object(m.jsxs)(j.a,{md:4,children:[Object(m.jsxs)(L.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(m.jsx)(L.a.Control,{type:"file",onChange:_}),Object(m.jsx)(L.a.Label,{children:"Choose photo or logo"})]}),z&&Object(m.jsx)("img",{src:"".concat("http://localhost:5000/","images/").concat(z),style:{objectFit:"scale-down",width:"18rem",height:"20rem"},alt:"logo"})]})]}),Object(m.jsxs)(l.a,{className:"d-grid gap-2",children:[Object(m.jsx)(M.a,{variant:"primary",size:"sm",onClick:ee,children:"Save changes"}),Object(m.jsx)(M.a,{variant:"secondary",size:"sm",as:P.b,to:"/",children:"Cancel"})]})]})})},De=function(){var e=Object(a.useContext)(f),t=e.categoriesList,c=e.subCategoriesList,n=e.searchParams,r=e.setSearchParams,s=Object(a.useState)(),o=Object(h.a)(s,2),i=o[0],u=o[1],O=Object(a.useState)(null),p=Object(h.a)(O,2),g=p[0],v=p[1],y=Object(a.useState)(!0),k=Object(h.a)(y,2),S=k[0],I=k[1],C=Object(a.useState)(),w=Object(h.a)(C,2),N=w[0],T=w[1],A=Object(a.useState)(),E=Object(h.a)(A,2),B=E[0],z=E[1],F=Object(a.useState)([]),D=Object(h.a)(F,2),P=D[0],H=D[1],q=Object(a.useState)(!1),M=Object(h.a)(q,2),R=M[0],U=M[1],Y=Object(a.useState)(!1),Z=Object(h.a)(Y,2),G=Z[0],V=Z[1];return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(!0),console.log("http://localhost:5000/"),e.next=5,x.a.post("".concat("http://localhost:5000/","search/v2/"),n);case 5:t=e.sent,c=t.data,u(c),console.log(c),I(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(v(e.t0.response.data.error),setTimeout((function(){return v(null)}),3e3),I(!1)):(v(e.t0.message),setTimeout((function(){return v(null)}),3e3),I(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(a.useEffect)((function(){console.log(R),R&&r((function(e){return{cityId:e.cityId,cityCoords:e.cityCoords,distance:e.distance,searchText:e.searchText,catId:N,subCatId:null}}))}),[R,N,r]),Object(a.useEffect)((function(){console.log(G),G&&r((function(e){return e.subCatId=B,e}))}),[G,B,r]),Object(a.useEffect)((function(){if(N){var e=c.filter((function(e){return e.parentId===N}));H(e),e.length>0?z(e[0].id):z(null)}else T(t[0].id)}),[N,c,t]),S?Object(m.jsx)(je,{}):g?Object(m.jsx)(W.a,{variant:"danger",children:g}):Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{sm:3,children:Object(m.jsx)(fe.a,{controlId:"floatingSelectCat",label:"Choose category",children:Object(m.jsx)(L.a.Select,{"aria-label":"Categories list",value:N,onChange:function(e){return T(parseInt(e.target.value,10))},children:t.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"catk".concat(t))}))})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("div",{className:"form-check form-switch",children:[Object(m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"switchUseCategories",defaultChecked:R,onChange:function(e){return U(e.target.checked)}}),Object(m.jsx)("label",{className:"form-check-label",htmlFor:"switchUseCategories",children:"Search in this category"})]})})]}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(j.a,{sm:3,children:Object(m.jsx)(fe.a,{controlId:"floatingSelectSubCat",label:"Choose sub-category",children:Object(m.jsx)(L.a.Select,{"aria-label":"Sub categories list",value:B,onChange:function(e){return z(parseInt(e.target.value,10))},children:P.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"subCatk".concat(t))}))})})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)("div",{className:"form-check form-switch",children:[Object(m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"switchUseSubCategories",defaultChecked:G,onChange:function(e){return V(e.target.checked)}}),Object(m.jsx)("label",{className:"form-check-label",htmlFor:"switchUseSubCategories",children:"Search in this sub category"})]})})]}),Object(m.jsxs)(l.a,{className:"g-4",children:[Object(m.jsx)(W.a,{variant:"success",children:"Search results for: "}),0===i.length&&Object(m.jsx)(W.a,{variant:"info",children:"No items found!"}),i.map((function(e,t){return Object(m.jsx)(le,{title:e.title,photo:e.photos,address:e.address,price:e.price,created:e.created,catId:e.catId,category:e.category,subCategoryId:e.subCategoryId,subCategory:e.subCategory,cityName:e.cityName,cityId:e.cityId,adId:e.adId,views:e.views},"adk".concat(t))}))]})]})})},Pe=c(184),Le=c(196),He=c(185),qe=c(186),Me=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],j=Object(a.useState)(!0),u=Object(h.a)(j,2),O=u[0],p=u[1],f=Object(a.useState)(),g=Object(h.a)(f,2),v=g[0],y=g[1],k=Object(a.useState)(!1),S=Object(h.a)(k,2),I=S[0],C=S[1],w=Object(a.useState)(!1),N=Object(h.a)(w,2),T=N[0],A=N[1],E=Object(a.useState)(!1),B=Object(h.a)(E,2),z=B[0],F=B[1],D=Object(a.useState)(!1),H=Object(h.a)(D,2),q=H[0],R=H[1],U=Object(a.useState)(),Y=Object(h.a)(U,2),Z=Y[0],G=Y[1],V=Object(a.useState)(),J=Object(h.a)(V,2),K=J[0],Q=J[1],$=Object(a.useState)([]),X=Object(h.a)($,2),_=X[0],ee=X[1],te=Object(a.useState)(!1),ae=Object(h.a)(te,2),ne=ae[0],re=ae[1],se=function(){return re(!1)},oe=function(){return C(!1)};Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),console.log("http://localhost:5000/"),e.next=5,x.a.get("".concat("http://localhost:5000/","ads/byuser/").concat(localStorage.getItem("userId")));case 5:t=e.sent,c=t.data,n(c),console.log(c),p(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),p(!1)):(i(e.t0.message),p(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[q]),Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat("http://localhost:5000/","adstates"));case 3:t=e.sent,c=t.data,ee(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),5e3),p(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),5e3),p(!1));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var ie=function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,x.a.delete("".concat("http://localhost:5000/","ads/").concat(v),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,console.log(c),C(!1),c.id===v&&A(!0),p(!1),R((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),p(!1)):(i(e.t0.message),p(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(b.a)(d.a.mark((function e(){var t,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={adNewStateId:K},e.prev=1,p(!0),e.next=5,x.a.put("".concat("http://localhost:5000/","adstates/updatestate/").concat(Z),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:c=e.sent,a=c.data,console.log(a),re(!1),a.id===Z&&F(!0),p(!1),R((function(e){return!e})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),5e3),p(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),5e3),p(!1));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();return O?Object(m.jsx)(je,{}):o?Object(m.jsx)(W.a,{variant:"danger",children:o}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(Pe.a,{className:"p-3",position:"middle-center",children:[Object(m.jsx)(Le.a,{bg:"warning",onClose:function(){return A(!1)},show:T,delay:3e3,autohide:!0,children:Object(m.jsxs)(Le.a.Body,{children:[" Ad # ",v," was deleted! "]})}),Object(m.jsx)(Le.a,{bg:"warning",onClose:function(){return F(!1)},show:z,delay:3e3,autohide:!0,children:Object(m.jsx)(Le.a.Body,{children:" Status successfully changed! "})})]}),Object(m.jsxs)(He.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"Title"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"Sub category"}),Object(m.jsx)("th",{children:"Category"}),Object(m.jsx)("th",{children:"Created on"}),Object(m.jsx)("th",{children:"Edit"}),Object(m.jsx)("th",{children:"Delete"}),Object(m.jsx)("th",{children:"Status"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(P.b,{to:"/view/".concat(e.adId),style:{textDecoration:"none"},children:e.adId})}),Object(m.jsx)("td",{children:e.title}),Object(m.jsx)("td",{children:e.price}),Object(m.jsx)("td",{children:e.subCategory}),Object(m.jsx)("td",{children:e.category}),Object(m.jsx)("td",{children:new Date(e.created).toLocaleString()}),Object(m.jsx)("td",{children:Object(m.jsx)(P.b,{to:"/editad/".concat(e.adId),children:Object(m.jsx)(Ee.a,{size:24})})}),Object(m.jsx)("td",{children:Object(m.jsx)(ce.a,{size:24,style:{cursor:"pointer"},onClick:function(){y(e.adId),C(!0)}})}),Object(m.jsx)("td",{children:Object(m.jsx)(qe.a,{size:24,style:{cursor:"pointer"},onClick:function(){Q(e.currentState),G(e.adId),re(!0)}})})]},"adk".concat(t))}))})]})]}),Object(m.jsxs)(Ae.a,{show:I,onHide:oe,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(Ae.a.Header,{closeButton:!0,children:Object(m.jsx)(Ae.a.Title,{children:"Please confirm!"})}),Object(m.jsxs)(Ae.a.Body,{children:["Do you really want to delete ad # ",v," ?"]}),Object(m.jsxs)(Ae.a.Footer,{children:[Object(m.jsx)(M.a,{variant:"success",onClick:oe,children:"No, missclicked!"}),Object(m.jsx)(M.a,{variant:"danger",onClick:ie,children:"Yes, pls delete!"})]})]}),Object(m.jsxs)(Ae.a,{show:ne,onHide:se,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(Ae.a.Header,{closeButton:!0,children:Object(m.jsx)(Ae.a.Title,{children:"Edit description"})}),Object(m.jsx)(Ae.a.Body,{children:Object(m.jsx)(fe.a,{controlId:"floatingSelectStatus",label:"Choose status",children:Object(m.jsx)(L.a.Select,{"aria-label":"Ad statuses list",value:K,onChange:function(e){return Q(parseInt(e.target.value,10))},children:_.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.description},"statusk".concat(t))}))})})}),Object(m.jsxs)(Ae.a.Footer,{children:[Object(m.jsx)(M.a,{variant:"success",onClick:se,children:"No, missclicked!"}),Object(m.jsx)(M.a,{variant:"danger",onClick:le,children:"Save changes"})]})]})]})},Re=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],j=Object(a.useState)(!0),u=Object(h.a)(j,2),O=u[0],p=u[1],f=Object(a.useState)(),g=Object(h.a)(f,2),v=g[0],y=g[1],k=Object(a.useState)(!1),S=Object(h.a)(k,2),I=S[0],C=S[1],w=Object(a.useState)(!1),N=Object(h.a)(w,2),T=N[0],A=N[1],E=Object(a.useState)(!1),B=Object(h.a)(E,2),z=B[0],F=B[1],D=Object(a.useState)(),H=Object(h.a)(D,2),q=H[0],R=H[1],U=Object(a.useState)(),Y=Object(h.a)(U,2),Z=Y[0],G=Y[1],V=Object(a.useState)(""),J=Object(h.a)(V,2),K=J[0],Q=J[1],$=Object(a.useState)(!1),X=Object(h.a)($,2),_=X[0],ee=X[1],te=function(){return ee(!1)},ae=function(){return C(!1)};Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),console.log("http://localhost:5000/"),e.next=5,x.a.get("".concat("http://localhost:5000/","favads/myfav/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:t=e.sent,c=t.data,n(c),console.log(c),p(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),p(!1)):(i(e.t0.message),p(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[z]);var ne=function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,x.a.delete("".concat("http://localhost:5000/","favads/").concat(v),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,console.log(c),C(!1),c.id===v&&A(!0),p(!1),F((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),p(!1)):(i(e.t0.message),p(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(b.a)(d.a.mark((function e(){var t,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={favAdId:Z,description:K},e.prev=1,p(!0),e.next=5,x.a.put("".concat("http://localhost:5000/","favads/").concat(q),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:c=e.sent,a=c.data,console.log(a),ee(!1),p(!1),F((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.response?(i(e.t0.response.data.error),p(!1)):(i(e.t0.message),p(!1));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return O?Object(m.jsx)(je,{}):o?Object(m.jsx)(W.a,{variant:"danger",children:o}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Pe.a,{className:"p-3",position:"middle-center",children:Object(m.jsx)(Le.a,{bg:"warning",onClose:function(){return A(!1)},show:T,delay:3e3,autohide:!0,children:Object(m.jsxs)(Le.a.Body,{children:[" Fav # ",v," was deleted! "]})})}),Object(m.jsxs)(He.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Title"}),Object(m.jsx)("th",{children:"Description"}),Object(m.jsx)("th",{children:"Edit"}),Object(m.jsx)("th",{children:"Delete"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(P.b,{to:"/view/".concat(e.adId),style:{textDecoration:"none"},children:e.adTitle})}),Object(m.jsx)("td",{children:e.description}),Object(m.jsxs)("td",{children:[Object(m.jsx)(Ee.a,{size:24,style:{cursor:"pointer"},onClick:function(){Q(e.description),R(e.id),G(e.adId),ee(!0)}})," "]}),Object(m.jsx)("td",{children:Object(m.jsx)(ce.a,{size:24,style:{cursor:"pointer"},onClick:function(){y(e.id),C(!0)}})})]},"adk".concat(t))}))})]})]}),Object(m.jsxs)(Ae.a,{show:I,onHide:ae,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(Ae.a.Header,{closeButton:!0,children:Object(m.jsx)(Ae.a.Title,{children:"Please confirm!"})}),Object(m.jsxs)(Ae.a.Body,{children:["Do you really want to remove from favotites # ",v," ?"]}),Object(m.jsxs)(Ae.a.Footer,{children:[Object(m.jsx)(M.a,{variant:"success",onClick:ae,children:"No, missclicked!"}),Object(m.jsx)(M.a,{variant:"danger",onClick:ne,children:"Yes, pls delete!"})]})]}),Object(m.jsxs)(Ae.a,{show:_,onHide:te,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(Ae.a.Header,{closeButton:!0,children:Object(m.jsx)(Ae.a.Title,{children:"Edit description"})}),Object(m.jsx)(Ae.a.Body,{children:Object(m.jsx)(L.a.Control,{value:K,cols:40,onChange:function(e){return Q(e.target.value)},as:"textarea",rows:3})}),Object(m.jsxs)(Ae.a.Footer,{children:[Object(m.jsx)(M.a,{variant:"success",onClick:te,children:"No, missclicked!"}),Object(m.jsx)(M.a,{variant:"danger",onClick:re,children:"Save changes"})]})]})]})},Ue=c(187),Ye=c(188),Ze=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],j=Object(a.useState)(!0),u=Object(h.a)(j,2),O=u[0],p=u[1],f=Object(a.useState)(!1),g=Object(h.a)(f,2),v=g[0],y=g[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,x.a.get("".concat("http://localhost:5000/","messages/inbox/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,n(c),console.log(c),p(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),3e3),p(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),3e3),p(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[v]);var k=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,x.a.get("".concat("http://localhost:5000/","messages/markread/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:c=e.sent,(a=c.data).id===t&&y((function(e){return!e})),console.log(a),p(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),3e3),p(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),3e3),p(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,x.a.delete("".concat("http://localhost:5000/","messages/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:c=e.sent,(a=c.data).id===t&&y((function(e){return!e})),console.log(a),p(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),setTimeout((function(){return i(null)}),3e3),p(!1)):(i(e.t0.message),setTimeout((function(){return i(null)}),3e3),p(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return O?Object(m.jsx)(je,{}):o?Object(m.jsx)(W.a,{variant:"danger",children:o}):!c||c.length<1?Object(m.jsx)(W.a,{variant:"danger",children:"No messages"}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(l.a,{children:Object(m.jsxs)(He.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"From"}),Object(m.jsx)("th",{children:"Title"}),Object(m.jsx)("th",{children:"Link to ad"}),Object(m.jsx)("th",{children:"Mark"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{children:e.fromUserName})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{children:e.msgRead?e.msgTitle:Object(m.jsx)("mark",{children:e.msgTitle})})}),Object(m.jsx)("td",{children:Object(m.jsx)(P.b,{to:"/view/".concat(e.adId),style:{textDecoration:"none"},children:e.adId})}),Object(m.jsxs)("td",{children:[e.msgRead?Object(m.jsx)(Ue.a,{size:24}):Object(m.jsx)(Ye.a,{size:24,style:{cursor:"pointer"},onClick:function(){k(e.id)}}),Object(m.jsx)(ce.a,{size:24,style:{cursor:"pointer"},onClick:function(){S(e.id)}})]})]},"adk".concat(t))}))})]})})})},Ge=function(){var e=Object(a.useState)({}),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!0),s=Object(h.a)(r,2),i=s[0],u=s[1],O=Object(a.useState)(null),p=Object(h.a)(O,2),f=p[0],g=p[1],v=Object(o.g)(),y=Object(a.useState)(!1),k=Object(h.a)(y,2),S=k[0],I=k[1],C=function(){return I(!1)},w=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,x.a.delete("".concat("http://localhost:5000/","stores/").concat(c.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,t.data.id===c.id&&(u(!1),v.push("/myprofile")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),5e3),u(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),5e3),u(!1));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,x.a.get("".concat("http://localhost:5000/","stores/my/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,n(c),console.log(c),u(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(g(e.t0.response.data.error),setTimeout((function(){return g(null)}),5e3),u(!1)):(g(e.t0.message),setTimeout((function(){return g(null)}),5e3),u(!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),i?Object(m.jsx)(je,{}):c?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.a,{className:"justify-content-center",children:[f&&Object(m.jsx)(W.a,{children:f}),Object(m.jsxs)(j.a,{sm:6,children:[Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(j.a,{className:"p-3",children:[Object(m.jsx)("h4",{children:c.title}),Object(m.jsx)("p",{children:c.description}),Object(m.jsx)("h6",{children:Object(m.jsx)("small",{className:"text-muted",children:"Address: "})}),Object(m.jsxs)("p",{children:[c.address,", ",c.cityName]})]}),Object(m.jsx)(j.a,{sm:6,className:"p-3",children:Object(m.jsx)("img",{src:"".concat("http://localhost:5000/","images/").concat(c.photo),style:{objectFit:"scale-down",width:"18rem",height:"20rem"},alt:"logo"})})]}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{className:"p-3",children:Object(m.jsx)(ke.a,{height:300,center:c.coords,defaultZoom:11,children:c.coords&&Object(m.jsx)(ke.b,{width:50,anchor:c.coords})})})}),Object(m.jsx)(l.a,{children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(M.a,{variant:"outline-dark",as:P.b,to:"/editstore/".concat(c.id),children:[Object(m.jsx)(Ee.a,{})," Edit store data"]}),Object(m.jsxs)(M.a,{variant:"outline-danger",onClick:function(){return I(!0)},children:[Object(m.jsx)(ce.a,{})," Delete store"]})]})})]})]}),Object(m.jsxs)(Ae.a,{show:S,onHide:C,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(Ae.a.Header,{closeButton:!0,children:Object(m.jsx)(Ae.a.Title,{children:"Do you really want to delete your store?"})}),Object(m.jsx)(Ae.a.Body,{children:"All your ads will be deleted."}),Object(m.jsxs)(Ae.a.Footer,{children:[Object(m.jsx)(M.a,{variant:"success",onClick:C,children:"No, missclicked!"}),Object(m.jsx)(M.a,{variant:"danger",onClick:w,children:"Yes, pls delete!"})]})]})]}):Object(m.jsx)(l.a,{className:"justify-content-center",children:Object(m.jsx)(j.a,{sm:6,children:Object(m.jsxs)("p",{className:"text-center",children:["You don't have a store yet. You can"," ",Object(m.jsx)("mark",{children:Object(m.jsx)(P.b,{to:"/registerstore",children:"register"})})," ","one."]})})})},Ve=function(){var e=Object(o.i)().storeId,t=Object(a.useState)({}),c=Object(h.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(!0),i=Object(h.a)(s,2),u=i[0],O=i[1],p=Object(a.useState)(null),f=Object(h.a)(p,2),g=f[0],v=f[1];return Object(a.useEffect)((function(){(function(){var t=Object(b.a)(d.a.mark((function t(){var c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,O(!0),t.next=4,x.a.get("".concat("http://localhost:5000/","stores/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:c=t.sent,a=c.data,r(a),console.log(a),O(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response?(v(t.t0.response.data.error),setTimeout((function(){return v(null)}),5e3),O(!1)):(v(t.t0.message),setTimeout((function(){return v(null)}),5e3),O(!1));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e]),u?Object(m.jsx)(je,{}):Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(l.a,{className:"justify-content-center",children:[g&&Object(m.jsx)(W.a,{children:g}),Object(m.jsxs)(j.a,{sm:6,children:[Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(j.a,{className:"p-3",children:[Object(m.jsx)(P.b,{to:"/bystore/".concat(n.id),style:{textDecoration:"none"},children:Object(m.jsx)("h4",{children:n.title})}),Object(m.jsx)("p",{children:n.description}),Object(m.jsx)("h6",{children:Object(m.jsx)("small",{className:"text-muted",children:"Address: "})}),Object(m.jsxs)("p",{children:[n.address,", ",n.cityName]})]}),Object(m.jsx)(j.a,{sm:6,className:"p-3",children:Object(m.jsx)("img",{src:"".concat("http://localhost:5000/","images/").concat(n.photo),style:{objectFit:"scale-down",width:"18rem",height:"20rem"},alt:"logo"})})]}),Object(m.jsx)(l.a,{children:Object(m.jsx)(j.a,{className:"p-3",children:Object(m.jsx)(ke.a,{height:300,center:n.coords,defaultZoom:11,children:n.coords&&Object(m.jsx)(ke.b,{width:50,anchor:n.coords})})})})]})]})})},Je=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"404"})})},Ke=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),o=s[0],i=s[1],j=Object(a.useState)(!0),u=Object(h.a)(j,2),O=u[0],p=u[1],f=Object(a.useState)(),g=Object(h.a)(f,2),v=g[0],y=g[1],k=Object(a.useState)(!1),S=Object(h.a)(k,2),I=S[0],C=S[1],w=Object(a.useState)(!1),N=Object(h.a)(w,2),T=N[0],A=N[1],E=Object(a.useState)(!1),B=Object(h.a)(E,2),z=B[0],F=B[1],D=Object(a.useState)(),H=Object(h.a)(D,2),q=H[0],R=H[1],U=Object(a.useState)(),Y=Object(h.a)(U,2),Z=Y[0],G=Y[1],V=Object(a.useState)(""),J=Object(h.a)(V,2),K=J[0],Q=J[1],$=Object(a.useState)(!1),X=Object(h.a)($,2),_=X[0],ee=X[1],te=function(){return ee(!1)},ae=function(){return C(!1)};Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),console.log("http://localhost:5000/"),e.next=5,x.a.get("".concat("http://localhost:5000/","favusers/myfav/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:t=e.sent,c=t.data,n(c),console.log(c),p(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),p(!1)):(i(e.t0.message),p(!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[z]);var ne=function(){var e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,x.a.delete("".concat("http://localhost:5000/","favads/").concat(v),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:t=e.sent,c=t.data,console.log(c),C(!1),c.id===v&&A(!0),p(!1),F((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?(i(e.t0.response.data.error),p(!1)):(i(e.t0.message),p(!1));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(b.a)(d.a.mark((function e(){var t,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={favAdId:Z,description:K},e.prev=1,p(!0),e.next=5,x.a.put("".concat("http://localhost:5000/","favads/").concat(q),t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:c=e.sent,a=c.data,console.log(a),ee(!1),p(!1),F((function(e){return!e})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.response?(i(e.t0.response.data.error),p(!1)):(i(e.t0.message),p(!1));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return O?Object(m.jsx)(je,{}):o?Object(m.jsx)(W.a,{variant:"danger",children:o}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.a,{children:[Object(m.jsx)(Pe.a,{className:"p-3",position:"middle-center",children:Object(m.jsx)(Le.a,{bg:"warning",onClose:function(){return A(!1)},show:T,delay:3e3,autohide:!0,children:Object(m.jsxs)(Le.a.Body,{children:[" Fav # ",v," was deleted! "]})})}),Object(m.jsxs)(He.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Title"}),Object(m.jsx)("th",{children:"Description"}),Object(m.jsx)("th",{children:"Edit"}),Object(m.jsx)("th",{children:"Delete"})]})}),Object(m.jsx)("tbody",{children:c.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(P.b,{to:"/view/".concat(e.adId),style:{textDecoration:"none"},children:e.adTitle})}),Object(m.jsx)("td",{children:e.description}),Object(m.jsxs)("td",{children:[Object(m.jsx)(Ee.a,{size:24,style:{cursor:"pointer"},onClick:function(){Q(e.description),R(e.id),G(e.adId),ee(!0)}})," "]}),Object(m.jsx)("td",{children:Object(m.jsx)(ce.a,{size:24,style:{cursor:"pointer"},onClick:function(){y(e.id),C(!0)}})})]},"adk".concat(t))}))})]})]}),Object(m.jsxs)(Ae.a,{show:I,onHide:ae,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(Ae.a.Header,{closeButton:!0,children:Object(m.jsx)(Ae.a.Title,{children:"Please confirm!"})}),Object(m.jsxs)(Ae.a.Body,{children:["Do you really want to remove from favotites # ",v," ?"]}),Object(m.jsxs)(Ae.a.Footer,{children:[Object(m.jsx)(M.a,{variant:"success",onClick:ae,children:"No, missclicked!"}),Object(m.jsx)(M.a,{variant:"danger",onClick:ne,children:"Yes, pls delete!"})]})]}),Object(m.jsxs)(Ae.a,{show:_,onHide:te,backdrop:"static",keyboard:!1,children:[Object(m.jsx)(Ae.a.Header,{closeButton:!0,children:Object(m.jsx)(Ae.a.Title,{children:"Edit description"})}),Object(m.jsx)(Ae.a.Body,{children:Object(m.jsx)(L.a.Control,{value:K,cols:40,onChange:function(e){return Q(e.target.value)},as:"textarea",rows:3})}),Object(m.jsxs)(Ae.a.Footer,{children:[Object(m.jsx)(M.a,{variant:"success",onClick:te,children:"No, missclicked!"}),Object(m.jsx)(M.a,{variant:"danger",onClick:re,children:"Save changes"})]})]})]})};var Qe=function(){return Object(m.jsx)(g,{children:Object(m.jsxs)(i.a,{fluid:!0,children:[Object(m.jsx)(_,{}),Object(m.jsx)(l.a,{className:"justify-content-center my-4",children:Object(m.jsx)(j.a,{md:9,children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{exact:!0,path:"/view/:adId",component:Te}),Object(m.jsx)(o.b,{exact:!0,path:"/signin",component:ge}),Object(m.jsx)(o.b,{exact:!0,path:"/signup",component:ve}),Object(m.jsx)(o.b,{exact:!0,path:"/search",component:De}),Object(m.jsx)(o.b,{exact:!0,path:"/viewstore/:storeId",component:Ve}),Object(m.jsx)(k,{exact:!0,path:"/myprofile",component:Be}),Object(m.jsx)(k,{exact:!0,path:"/myfavads",component:Re}),Object(m.jsx)(k,{exact:!0,path:"/myfavusers",component:Ke}),Object(m.jsx)(k,{exact:!0,path:"/mystore",component:Ge}),Object(m.jsx)(k,{exact:!0,path:"/messages",component:Ze}),Object(m.jsx)(k,{exact:!0,path:"/editprofile",component:ze}),Object(m.jsx)(k,{exact:!0,path:"/registerstore",component:Fe}),Object(m.jsx)(k,{exact:!0,path:"/editstore/:storeId",component:Fe}),Object(m.jsx)(k,{exact:!0,path:"/newad",component:Ce}),Object(m.jsx)(k,{exact:!0,path:"/myads",component:Me}),Object(m.jsx)(k,{exact:!0,path:"/editad/:adId",component:Ce}),Object(m.jsx)(k,{exact:!0,path:"/admin/categoryeditor",component:we}),Object(m.jsx)(o.b,{exact:!0,path:"/bysubcategory/:subCatId",component:he}),Object(m.jsx)(o.b,{exact:!0,path:"/bycategory/:catId",component:he}),Object(m.jsx)(o.b,{exact:!0,path:"/bycity/:cityId",component:he}),Object(m.jsx)(o.b,{exact:!0,path:"/byuser/:adsByUserId",component:he}),Object(m.jsx)(o.b,{exact:!0,path:"/bystore/:adsByStoreId",component:he}),Object(m.jsx)(o.b,{exact:!0,path:"/",component:he}),Object(m.jsx)(o.b,{path:"*",component:Je})]})})}),Object(m.jsx)(me,{})]})})};s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(P.a,{children:Object(m.jsx)(Qe,{})})}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.f4bdbaaf.chunk.js.map